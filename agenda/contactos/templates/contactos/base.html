<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>
      {% block title %}
        Agenda de Contactos
      {% endblock %}
    </title>
    <script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>
  </head>
  <body class="bg-gray-100 text-gray-800">
    <nav class="bg-blue-600 p-4 text-white">
      <a href="{% url 'lista_contactos' %}" class="font-bold">Agenda de Contactos</a>
    </nav>
    <div class="container mx-auto p-4">
      {% block content %}

      {% endblock %}
    </div>
  </body>
  <!-- CSRF Token para AJAX requests -->
  <script>
    // Función para obtener el CSRF token
    function getCSRFToken() {
      return document.querySelector('[name=csrfmiddlewaretoken]').value
    }
    
    // Configurar CSRF token para todas las peticiones AJAX
    function setupCSRF() {
      const csrftoken = getCSRFToken()
    
      // Configurar jQuery si está disponible
      if (typeof $ !== 'undefined') {
        $.ajaxSetup({
          beforeSend: function (xhr, settings) {
            if (!this.crossDomain) {
              xhr.setRequestHeader('X-CSRFToken', csrftoken)
            }
          }
        })
      }
    }
    
    // Ejecutar cuando el documento esté listo
    document.addEventListener('DOMContentLoaded', function () {
      if (document.querySelector('[name=csrfmiddlewaretoken]')) {
        setupCSRF()
      }
    })
  </script>
</html>
